(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[366],{1725:function(e,l,s){Promise.resolve().then(s.bind(s,7573))},7573:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return C}});var n=s(9268),a=s(6006),i=s(2801),t=s(8176),c=s(8298),r=s(3702),d=s(7932),o=s(4390),u=s(6450);let m={DEDICATED:"dedicated",MANAGEMENT:"management",VMOTION:"vmotion"},h={MANAGEMENT:"management",VMOTION:"vmotion",REPLICATION:"replication",UPLINK:"uplink"};var x=s(315),v=s(845),p=s(1437),j=s(7663),N=e=>{let{mesh:l,onMeshChange:s}=e,{hcxProject:t}=(0,a.useContext)(i.ProjectContext),[c,r]=(0,a.useState)([]),[d,o]=(0,a.useState)([]);(0,a.useEffect)(()=>{if(null==t?void 0:t.vcenters){let e=t.vcenters.map(e=>({label:e.vcenter_name,value:e.vcenter_name}));o(e)}},[t]),(0,a.useEffect)(()=>{if(l.vcenter_name&&(null==t?void 0:t.vcenters)){let e=t.vcenters.find(e=>e.vcenter_name===l.vcenter_name);e&&r(e.vcenter_clusters||[])}else r([])},[l.vcenter_name,t]);let u=c.map(e=>({label:e,value:e})),m=e=>{s("vcenter_name",e),s("clusters_services",[]),s("clusters_deployments",[]),s("storage",[]),s("pool",[])};return(0,n.jsxs)("div",{className:"grid",children:[(0,n.jsx)("div",{className:"col-12 md:col-6",children:(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{htmlFor:"name",className:"font-bold",children:"Service Mesh Name"}),(0,n.jsx)(x.o,{id:"name",value:l.name,onChange:e=>s("name",e.target.value),className:"w-full",placeholder:"Enter service mesh name"})]})}),(0,n.jsx)("div",{className:"col-12 md:col-6",children:(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{htmlFor:"vcenter",className:"font-bold",children:"vCenter"}),(0,n.jsx)(v.L,{id:"vcenter",value:l.vcenter_name,onChange:e=>m(e.value),options:d,className:"w-full",placeholder:"Select vCenter"})]})}),(0,n.jsx)("div",{className:"col-12 md:col-6",children:(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{className:"font-bold",children:"Service Clusters"}),(0,n.jsx)(p.N,{value:l.clusters_services,onChange:e=>s("clusters_services",e.value),options:u,placeholder:"Select service clusters",className:"w-full",disabled:!l.vcenter_name})]})}),(0,n.jsx)("div",{className:"col-12 md:col-6",children:(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{className:"font-bold",children:"Deployment Clusters"}),(0,n.jsx)(p.N,{value:l.clusters_deployments,onChange:e=>s("clusters_deployments",e.value),options:u,placeholder:"Select deployment clusters",className:"w-full",disabled:!l.vcenter_name})]})}),(0,n.jsx)("div",{className:"col-12 md:col-6",children:(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{className:"font-bold",children:"Storage"}),(0,n.jsx)(j.c,{value:l.storage,onChange:e=>s("storage",e.value),placeholder:"Add storage",className:"w-full",disabled:!l.vcenter_name})]})}),(0,n.jsx)("div",{className:"col-12 md:col-6",children:(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{className:"font-bold",children:"Resource Pool"}),(0,n.jsx)(j.c,{value:l.pool,onChange:e=>s("pool",e.value),placeholder:"Add resource pool",className:"w-full",disabled:!l.vcenter_name})]})})]})},_=s(4618),f=e=>{let{mesh:l,onMeshChange:s}=e;return(0,n.jsx)("div",{className:"field",children:(0,n.jsx)("div",{className:"flex flex-column gap-4",children:(0,n.jsxs)("div",{className:"flex flex-column gap-3",children:[(0,n.jsxs)("div",{className:"flex flex-column",children:[(0,n.jsxs)("div",{className:"flex align-items-center",children:[(0,n.jsx)(_.X,{inputId:"hcx_ix",checked:!0,disabled:!0}),(0,n.jsx)("label",{htmlFor:"hcx_ix",className:"ml-2",children:"HCX-IX Enabled"})]}),(0,n.jsx)("small",{className:"text-gray-500 ml-6",children:"Interconnect service is enabled by default for all service meshes"})]}),(0,n.jsxs)("div",{className:"flex flex-column",children:[(0,n.jsxs)("div",{className:"flex align-items-center",children:[(0,n.jsx)(_.X,{inputId:"wo_enabled",checked:l.wo_enabled,onChange:e=>s("wo_enabled",e.checked)}),(0,n.jsx)("label",{htmlFor:"wo_enabled",className:"ml-2",children:"Enable WO"})]}),(0,n.jsx)("small",{className:"text-gray-500 ml-6",children:"WAN Optimization service (recommended for connections below 1Gbps)"})]}),(0,n.jsxs)("div",{className:"flex flex-column",children:[(0,n.jsxs)("div",{className:"flex align-items-center",children:[(0,n.jsx)(_.X,{inputId:"ne_enabled",checked:l.ne_enabled,onChange:e=>s("ne_enabled",e.checked)}),(0,n.jsx)("label",{htmlFor:"ne_enabled",className:"ml-2",children:"Enable NE"})]}),(0,n.jsx)("small",{className:"text-gray-500 ml-6",children:"Network Extension service for stretched L2 networks"})]})]})})})},b=s(1856),g=e=>{let{profile:l,onChange:s,title:a,distributedSwitches:i=[],networkType:t}=e,c=i.reduce((e,l)=>e+l.ne_count,0),r=i.reduce((e,l)=>e+l.ne_ha_count,0);return l?(0,n.jsxs)("div",{className:"card col-12",children:[(0,n.jsx)("h3",{children:a}),(0,n.jsxs)("div",{className:"grid",children:[(0,n.jsx)("div",{className:"col-12 md:col-6",children:(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{className:"font-bold",children:"Network name"}),(0,n.jsx)(x.o,{value:l.network,onChange:e=>s({...l,network:e.target.value}),className:"w-full"})]})}),(0,n.jsx)("div",{className:"col-12 md:col-6",children:(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{className:"font-bold",children:"Gateway"}),(0,n.jsx)(x.o,{value:l.gateway,onChange:e=>s({...l,gateway:e.target.value}),className:"w-full"})]})}),(0,n.jsx)("div",{className:"col-12 md:col-6",children:(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{className:"font-bold",children:"Prefix"}),(0,n.jsx)(b.R,{value:l.prefix,onValueChange:e=>{var n;return s({...l,prefix:(null===(n=e.value)||void 0===n?void 0:n.toString())||""})},className:"w-full",min:0,max:32,placeholder:"Enter network prefix (0-32)"})]})}),(0,n.jsx)("div",{className:"col-12 md:col-6",children:(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{className:"font-bold",children:"IP Addresses"}),(0,n.jsx)(j.c,{value:l.ip,onChange:e=>s({...l,ip:e.value}),className:"w-full",placeholder:"Enter IP and press Enter",allowDuplicate:!1,separator:","})]})}),"vmotion"!==t&&"replication"!==t&&(0,n.jsx)("div",{className:"col-12 md:col-6",children:(0,n.jsx)("div",{className:"field",children:(0,n.jsxs)("div",{className:"text-gray-500",children:[(0,n.jsx)("p",{children:"Required IP addresses:"}),(0,n.jsxs)("ul",{className:"list-none p-0 m-0",children:[(0,n.jsx)("li",{children:"• 1 IP for IX"}),(0,n.jsxs)("li",{children:["• ",c," IP",c>1?"s":""," for NE (",r," HA pairs, ",c-r," standalone)"]}),(0,n.jsxs)("li",{children:["• Total: ",c+1," required"]}),(0,n.jsxs)("li",{className:l.ip.length>=c+1?"text-green-500":"text-red-500",children:["• ",l.ip.length," IP",1!==l.ip.length?"s":""," provided"]})]})]})})}),("vmotion"===t||"replication"===t)&&(0,n.jsx)("div",{className:"col-12 md:col-6",children:(0,n.jsx)("div",{className:"field",children:(0,n.jsxs)("div",{className:"text-gray-500",children:[(0,n.jsx)("p",{children:"Required IP addresses:"}),(0,n.jsxs)("ul",{className:"list-none p-0 m-0",children:[(0,n.jsx)("li",{children:"• 1 IP for IX"}),(0,n.jsx)("li",{children:"• Total: 1 required"}),(0,n.jsxs)("li",{className:l.ip.length>=1?"text-green-500":"text-red-500",children:["• ",l.ip.length," IP",1!==l.ip.length?"s":""," provided"]})]})]})})}),(0,n.jsx)("div",{className:"col-12 md:col-6",children:(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{className:"font-bold",children:"DNS Servers"}),(0,n.jsx)(j.c,{value:l.dns_servers,onChange:e=>{let n=e.value.slice(0,2);s({...l,dns_servers:n})},className:"w-full",placeholder:"Enter DNS server IP and press Enter (max 2)",allowDuplicate:!1,separator:",",max:2})]})})]})]}):null},w=e=>{let{mesh:l,onMeshChange:s}=e,a=[{label:"Management",value:m.MANAGEMENT},{label:"vMotion",value:m.VMOTION},{label:"Dedicated",value:m.DEDICATED}],i=a.filter(e=>e.value!==m.VMOTION),t=l.vmotion_type===m.DEDICATED?a:a.filter(e=>e.value!==m.VMOTION);return(0,n.jsxs)("div",{className:"grid",children:[(0,n.jsx)(g,{title:"Management Network",profile:l.management,onChange:e=>s(h.MANAGEMENT,e),distributedSwitches:l.distributed_switches,networkType:"management"}),(0,n.jsxs)("div",{className:" card col-12",children:[(0,n.jsx)("h3",{children:"Network Types"}),(0,n.jsxs)("div",{className:"grid",children:[(0,n.jsx)("div",{className:"col-12 md:col-4",children:(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{className:"font-bold",children:"vMotion Type"}),(0,n.jsx)(v.L,{value:l.vmotion_type||m.MANAGEMENT,options:i,onChange:e=>s("vmotion_type",e.value),className:"w-full"})]})}),(0,n.jsx)("div",{className:"col-12 md:col-4",children:(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{className:"font-bold",children:"Replication Type"}),(0,n.jsx)(v.L,{value:l.replication_type||m.MANAGEMENT,options:t,onChange:e=>s("replication_type",e.value),className:"w-full"})]})}),(0,n.jsx)("div",{className:"col-12 md:col-4",children:(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{className:"font-bold",children:"Uplink Type"}),(0,n.jsx)(v.L,{value:l.uplink_type||m.MANAGEMENT,options:a.filter(e=>e.value!==m.VMOTION),onChange:e=>s("uplink_type",e.value),className:"w-full"})]})})]})]}),l.vmotion_type===m.DEDICATED&&(0,n.jsx)(g,{title:"vMotion Network",profile:l.vmotion,onChange:e=>s(h.VMOTION,e),distributedSwitches:l.distributed_switches,networkType:"vmotion"}),l.replication_type===m.DEDICATED&&(0,n.jsx)(g,{title:"Replication Network",profile:l.replication,onChange:e=>s(h.REPLICATION,e),distributedSwitches:l.distributed_switches,networkType:"replication"}),l.uplink_type===m.DEDICATED&&(0,n.jsx)(g,{title:"Uplink Network",profile:l.uplink,onChange:e=>s(h.UPLINK,e),distributedSwitches:l.distributed_switches,networkType:"uplink"})]})},y=e=>{let{mesh:l,onMeshChange:s}=e,[i,d]=(0,a.useState)(null),[u,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[j,N]=(0,a.useState)(null),_=e=>{d({...e}),m(!0)},f=()=>{m(!1),d(null)},g=e=>{let n=l.distributed_switches.filter(l=>l.name!==e.name);s("distributed_switches",n)},w=(0,n.jsxs)("div",{children:[(0,n.jsx)(r.z,{label:"Cancel",icon:"pi pi-times",onClick:f,className:"p-button-text"}),(0,n.jsx)(r.z,{label:"Save",icon:"pi pi-check",onClick:()=>{if(i&&l.distributed_switches){let e=[...l.distributed_switches],n=e.findIndex(e=>e.name===i.name);n>=0?e[n]=i:e.push(i),s("distributed_switches",e),m(!1),d(null)}},severity:"success"})]});return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-content-between align-items-center mb-4",children:[(0,n.jsx)("h4",{children:"Distributed Switches"}),(0,n.jsx)(r.z,{label:"Add Switch",icon:"pi pi-plus",severity:"success",rounded:!0,onClick:()=>{d({name:"",ne_count:1,ne_ha_count:0,extended_network:[]}),m(!0)},className:" col-12 md:col-6 lg:col-3"})]}),(0,n.jsxs)(t.w,{value:l.distributed_switches,tableStyle:{minWidth:"50rem"},children:[(0,n.jsx)(c.s,{field:"name",header:"Name",sortable:!0}),(0,n.jsx)(c.s,{field:"extended_network",header:"Extended Networks",body:e=>e.extended_network.flat().length}),(0,n.jsx)(c.s,{header:"Appliances",sortable:!0,body:e=>(0,n.jsxs)("div",{children:[e.ne_ha_count>0&&"".concat(e.ne_ha_count," HA pairs"),e.ne_ha_count>0&&e.ne_count-e.ne_ha_count>0&&", ",e.ne_count-e.ne_ha_count>0&&"".concat(e.ne_count-e.ne_ha_count," standalone")]})}),(0,n.jsx)(c.s,{body:e=>(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(r.z,{icon:"pi pi-pencil",rounded:!0,outlined:!0,className:"mr-2",onClick:()=>_(e)}),(0,n.jsx)(r.z,{icon:"pi pi-trash",rounded:!0,outlined:!0,severity:"danger",onClick:()=>g(e)})]}),exportable:!1,style:{minWidth:"12rem"}})]}),(0,n.jsx)(o.V,{visible:u,style:{width:"80vw"},header:(null==i?void 0:i.name)?"Edit Switch":"Add Switch",modal:!0,className:"p-fluid",footer:w,onHide:f,children:(0,n.jsxs)("div",{className:"grid",children:[(0,n.jsxs)("div",{className:"col-12 md:col-4",children:[(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{htmlFor:"name",children:"Name"}),(0,n.jsx)(x.o,{id:"name",value:(null==i?void 0:i.name)||"",onChange:e=>d(l=>l?{...l,name:e.target.value}:null)})]}),(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{htmlFor:"ne_count",children:"NE Count"}),(0,n.jsx)(b.R,{id:"ne_count",value:(null==i?void 0:i.ne_count)||1,onValueChange:e=>d(l=>l?{...l,ne_count:e.value||1}:null),min:1})]}),(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{htmlFor:"ne_ha_count",children:"NE HA Count"}),(0,n.jsx)(b.R,{id:"ne_ha_count",value:(null==i?void 0:i.ne_ha_count)||0,onValueChange:e=>d(l=>l?{...l,ne_ha_count:Math.min(e.value||0,l.ne_count)}:null),min:0,max:(null==i?void 0:i.ne_count)||0}),(0,n.jsx)("small",{className:"text-gray-500 block mt-1",children:"".concat((null==i?void 0:i.ne_ha_count)||0," HA pairs, ").concat(((null==i?void 0:i.ne_count)||0)-((null==i?void 0:i.ne_ha_count)||0)," standalone appliances")})]})]}),(0,n.jsxs)("div",{className:"col-12 md:col-8",children:[(0,n.jsxs)("div",{className:"flex justify-content-between align-items-center mb-4",children:[(0,n.jsx)("h5",{className:"m-0",children:"Extended Networks"}),(0,n.jsx)(r.z,{label:"Add network",icon:"pi pi-plus",rounded:!0,className:" col-12 md:col-6 lg:col-3",severity:"success",onClick:()=>{N({name:"",network:"",prefix:"",gateway:"",vlan_id:"",ne_id:""}),p(!0)}}),(0,n.jsx)(o.V,{visible:h,style:{width:"450px"},header:"Add Network",modal:!0,className:"p-fluid",footer:(0,n.jsxs)("div",{children:[(0,n.jsx)(r.z,{label:"Cancel",icon:"pi pi-times",onClick:()=>p(!1),className:"p-button-text"}),(0,n.jsx)(r.z,{label:"Save",icon:"pi pi-check",onClick:()=>{j&&i&&(d(e=>{if(!e)return e;let l=Array.isArray(e.extended_network[0])?e.extended_network.flat():e.extended_network,s=l.findIndex(e=>e.name===j.name);return s>=0?l[s]=j:l.push(j),{...e,extended_network:l}}),p(!1),N(null))},severity:"success"})]}),onHide:()=>p(!1),children:(0,n.jsx)("div",{className:"grid",children:(0,n.jsxs)("div",{className:"col-12",children:[(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{htmlFor:"net_name",children:"Name"}),(0,n.jsx)(x.o,{id:"net_name",value:(null==j?void 0:j.name)||"",onChange:e=>N(l=>({...l,name:e.target.value}))})]}),(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{htmlFor:"network",children:"Network"}),(0,n.jsx)(x.o,{id:"network",value:(null==j?void 0:j.network)||"",onChange:e=>N(l=>({...l,network:e.target.value}))})]}),(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{htmlFor:"prefix",children:"Prefix"}),(0,n.jsx)(x.o,{id:"prefix",value:(null==j?void 0:j.prefix)||"",onChange:e=>N(l=>({...l,prefix:e.target.value}))})]}),(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{htmlFor:"gateway",children:"Gateway"}),(0,n.jsx)(x.o,{id:"gateway",value:(null==j?void 0:j.gateway)||"",onChange:e=>N(l=>({...l,gateway:e.target.value}))})]}),(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{htmlFor:"vlan_id",children:"VLAN ID"}),(0,n.jsx)(b.R,{id:"vlan_id",value:(null==j?void 0:j.vlan_id)||"",onValueChange:e=>N(l=>({...l,vlan_id:e.value})),min:0,max:4094,useGrouping:!1})]}),(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{htmlFor:"ne_id",children:"NE Appliance"}),(0,n.jsx)(v.L,{id:"ne_id",value:(null==j?void 0:j.ne_id)||"",options:(()=>{if(!i)return[];let e=i.extended_network.flat().map(e=>e.ne_id).filter(e=>e!==(null==j?void 0:j.ne_id)),l=[];for(let s=0;s<i.ne_ha_count;s++)l.push({label:"NE ".concat(s+1," (HA enabled)").concat(e.includes("ne".concat(s+1))?" - In use":""),value:"ne".concat(s+1)});for(let s=i.ne_ha_count;s<i.ne_count;s++)l.push({label:"NE ".concat(s+1).concat(e.includes("ne".concat(s+1))?" - In use":""),value:"ne".concat(s+1)});return l})(),onChange:e=>N(l=>({...l,ne_id:e.value})),placeholder:"Select an appliance"})]})]})})})]}),(0,n.jsxs)(t.w,{value:Array.isArray(null==i?void 0:i.extended_network[0])?null==i?void 0:i.extended_network.flat():(null==i?void 0:i.extended_network)||[],tableStyle:{minWidth:"50rem"},children:[(0,n.jsx)(c.s,{field:"name",header:"Name"}),(0,n.jsx)(c.s,{field:"network",header:"Network"}),(0,n.jsx)(c.s,{field:"prefix",header:"Prefix"}),(0,n.jsx)(c.s,{field:"gateway",header:"Gateway"}),(0,n.jsx)(c.s,{field:"vlan_id",header:"VLAN ID"}),(0,n.jsx)(c.s,{field:"ne_id",header:"NE Appliance"}),(0,n.jsx)(c.s,{body:e=>(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(r.z,{icon:"pi pi-pencil",rounded:!0,text:!0,onClick:()=>{N({...e}),p(!0)}}),(0,n.jsx)(r.z,{icon:"pi pi-trash",rounded:!0,text:!0,severity:"danger",onClick:()=>{d(l=>{if(!l)return l;let s=Array.isArray(l.extended_network[0])?l.extended_network.flat():l.extended_network,n=s.filter(l=>l!==e);return{...l,extended_network:n}})}})]}),style:{width:"8rem"}})]})]})]})})]})},k=e=>{let{visible:l,onHide:s,onSave:i,editingMesh:t}=e,[c,d]=(0,a.useState)(0),[h,x]=(0,a.useState)({id:"",name:"",vcenter_name:"",clusters_services:[],clusters_deployments:[],storage:[],pool:[],management:{network:"",ip:[],prefix:"",gateway:"",dns_servers:[]},vmotion_type:m.MANAGEMENT,replication_type:m.MANAGEMENT,uplink_type:m.MANAGEMENT,vmotion:null,replication:null,uplink:null,distributed_switches:[],wo_enabled:!1});(0,a.useEffect)(()=>{t?x(t):x({id:"",name:"",vcenter_name:"",clusters_services:[],clusters_deployments:[],storage:[],pool:[],management:{network:"",ip:[],prefix:"",gateway:"",dns_servers:[]},vmotion_type:m.MANAGEMENT,replication_type:m.MANAGEMENT,uplink_type:m.MANAGEMENT,vmotion:null,replication:null,uplink:null,distributed_switches:[],wo_enabled:!1})},[t,l]);let v=(e,l)=>{x(s=>({...s,[e]:l}))},p=(0,n.jsxs)("div",{className:"flex justify-content-end gap-2",children:[(0,n.jsx)(r.z,{label:"Cancel",icon:"pi pi-times",onClick:()=>{s(),d(0)}}),(0,n.jsx)(r.z,{label:"Save",icon:"pi pi-check",onClick:()=>{h&&(h.id||(h.id="mesh_".concat(Date.now())),i(h),s(),d(0))},severity:"success"})]});return(0,n.jsx)(o.V,{visible:l,style:{width:"80vw"},header:(null==t?void 0:t.id)?"Edit Service Mesh":"Add Service Mesh",modal:!0,className:"p-fluid",footer:p,onHide:s,children:h&&(0,n.jsxs)(u.f,{activeIndex:c,onTabChange:e=>d(e.index),children:[(0,n.jsx)(u.x,{header:"General",children:(0,n.jsx)(N,{mesh:h,onMeshChange:v})}),(0,n.jsx)(u.x,{header:"HCX Services",children:(0,n.jsx)(f,{mesh:h,onMeshChange:v})}),(0,n.jsx)(u.x,{header:"Distributed Switches",disabled:!h.ne_enabled,children:(0,n.jsx)(y,{mesh:h,onMeshChange:v})}),(0,n.jsx)(u.x,{header:"Network Profile",children:(0,n.jsx)(w,{mesh:h,onMeshChange:v})})]})})},C=()=>{var e;let{hcxProject:l,setHcxProject:s}=(0,a.useContext)(i.ProjectContext),[o,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)(null),x=e=>{h(e),console.log("service mesh to update:"),console.log(e),u(!0)},v=e=>{(0,d.V)({message:"Are you sure you want to delete this service mesh?",header:"Delete Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{if(l&&s){let n=l.vcenters.map(l=>({...l,serviceMeshes:l.serviceMeshes.filter(l=>l.id!==e.id)}));s({...l,vcenters:n})}}})};return(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)(d.Q,{}),(0,n.jsxs)("div",{className:"flex justify-content-between mb-4",children:[(0,n.jsx)("h2",{children:"Service Mesh Configuration"}),(0,n.jsx)(r.z,{label:"Add Service Mesh",icon:"pi pi-plus",severity:"success",onClick:()=>{h(null),u(!0)}})]}),(0,n.jsxs)(t.w,{value:(null==l?void 0:null===(e=l.vcenters)||void 0===e?void 0:e.flatMap(e=>e.serviceMeshes))||[],paginator:!0,rows:10,rowsPerPageOptions:[5,10,20],tableStyle:{minWidth:"50rem"},children:[(0,n.jsx)(c.s,{field:"name",header:"Name",sortable:!0}),(0,n.jsx)(c.s,{field:"vcenter_name",header:"vCenter",sortable:!0}),(0,n.jsx)(c.s,{field:"clusters_services",header:"Service Clusters",body:e=>{var l;return null===(l=e.clusters_services)||void 0===l?void 0:l.join(", ")}}),(0,n.jsx)(c.s,{field:"clusters_deployments",header:"Deployment Clusters",body:e=>{var l;return null===(l=e.clusters_deployments)||void 0===l?void 0:l.join(", ")}}),(0,n.jsx)(c.s,{body:e=>(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(r.z,{icon:"pi pi-pencil",rounded:!0,outlined:!0,className:"mr-2",onClick:()=>x(e)}),(0,n.jsx)(r.z,{icon:"pi pi-trash",rounded:!0,outlined:!0,severity:"danger",onClick:()=>v(e)})]}),exportable:!1,style:{minWidth:"12rem"}})]}),(0,n.jsx)(k,{visible:o,onHide:()=>{u(!1),h(null)},onSave:e=>{if(l&&s){let n={...e,storage:e.storage||[],pool:e.pool||[],clusters_services:e.clusters_services||[],clusters_deployments:e.clusters_deployments||[]},a=l.vcenters.map(e=>{if(e.vcenter_name===n.vcenter_name){let l=m?e.serviceMeshes.map(e=>e.id===n.id?n:e):[...e.serviceMeshes||[],n];return{...e,serviceMeshes:l}}return e});s({...l,vcenters:a})}u(!1),h(null)},editingMesh:m})]})}},2801:function(e,l,s){"use strict";s.r(l),s.d(l,{ProjectContext:function(){return t},ProjectProvider:function(){return c}});var n=s(9268),a=s(6006),i=s(6539);let t=(0,a.createContext)({hcxProject:{name:""},setHcxProject:()=>{}});function c(e){let{children:l}=e,[s,c]=(0,a.useState)(!1),[r,d]=(0,a.useState)({name:"",vcenters:[{...i.T.VCENTER,serviceMeshes:[{...i.T.SERVICE_MESH}]}]});return(0,a.useEffect)(()=>{c(!0);let e=localStorage.getItem("hcxProject");e&&d(JSON.parse(e))},[]),(0,a.useEffect)(()=>{s&&localStorage.setItem("hcxProject",JSON.stringify(r))},[r,s]),(0,n.jsx)(t.Provider,{value:{hcxProject:r,setHcxProject:d},children:l})}},6539:function(e,l,s){"use strict";s.d(l,{E:function(){return a},T:function(){return n}});let n={VCENTER:{vcenter_name:"",vcenter_sso_url:"",vcenter_version:"",vcenter_url:"",vcenter_clusters:[],hcx_manager_name:"",hcx_cluster:"",hcx_datastore:"",hcx_resource_pool:"",hcx_ip:"",hcx_network:"",hcx_network_prefix:"",hcx_gateway:"",hcx_dns_servers:[],hcx_ntp_servers:[],serviceMeshes:[]},SERVICE_MESH:{name:"",vcenter_name:"",clusters_services:[],clusters_deployments:[],storage:[],pool:[],management:{network:"",ip:[],prefix:"",gateway:"",dns_servers:[]},vmotion_type:"management",replication_type:"management",uplink_type:"management",vMotion:null,replication:null,uplink:null,distributed_switches:[],wo_enabled:!1}},a={IP_ADDRESS:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,URL:/^https?:\/\/.+/,VERSION:/^\d+\.\d+(\.\d+)?$/,NETWORK_PREFIX:/^([1-9]|[1-2][0-9]|3[0-2])$/}}},function(e){e.O(0,[123,434,347,702,562,346,516,728,795,253,769,744],function(){return e(e.s=1725)}),_N_E=e.O()}]);