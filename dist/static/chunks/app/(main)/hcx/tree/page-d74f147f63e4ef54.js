(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[371],{4200:function(e,t,n){Promise.resolve().then(n.bind(n,6009))},6009:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n(9268),s=n(4213),r=n.n(s),c=n(6006),o=n(9230),i=n(2801),l=n(4618),d=n(3702),m=n(4022),u=n.n(m);function p(){let{hcxProject:e}=(0,c.useContext)(i.ProjectContext),[t,n]=(0,c.useState)([]),[s,m]=(0,c.useState)(!0),[p,x]=(0,c.useState)(!1),[g,h]=(0,c.useState)(null),[v,f]=(0,c.useState)(!1),[b,_]=(0,c.useState)(1),[y,w]=(0,c.useState)({x:0,y:0}),[N,j]=(0,c.useState)(!1),[E,S]=(0,c.useState)({x:0,y:0});(0,c.useEffect)(()=>{e&&(()=>{var t,a;let r=[{expanded:!0,type:"project",className:"bg-teal-300 text-white",style:{borderRadius:"12px"},data:{name:e.name||"Project",type:"",details:"vCenters: ".concat((null===(t=e.vcenters)||void 0===t?void 0:t.length)||0),images:["/images/ho.png"]},children:null===(a=e.vcenters)||void 0===a?void 0:a.map(e=>{var t;return{expanded:!0,type:"vcenter",className:"bg-purple-500 text-white",style:{borderRadius:"12px"},data:{name:e.name,type:"vCenter",details:"IP: ".concat(e.vcenter_ip),images:["/images/vcenter.png","/images/hcx.png"]},children:(null===(t=e.serviceMeshes)||void 0===t?void 0:t.map(e=>{var t,n,a,r;return{expanded:!0,type:"mesh",className:"bg-indigo-400 text-white",style:{borderRadius:"12px"},data:{name:e.name||"Service Mesh",type:"Service Mesh",details:"HCX-WO: ".concat(e.wo_enabled?"Enabled":"Disabled"," | HCX-NE: ").concat(e.ne_enabled?"Enabled":"Disabled"),images:["/images/ix.png",...e.wo_enabled?["/images/wo.png"]:[],...(null===(t=e.distributed_switches)||void 0===t?void 0:t.length)?["/images/ne.png"]:[]]},children:[{expanded:!0,type:"services",className:"bg-orange-400 text-white",style:{borderRadius:"12px"},data:{name:"Service Clusters",type:"",details:(null===(n=e.clusters_services)||void 0===n?void 0:n.join(", "))||"None",images:["/images/cluster.png"]}},{expanded:!0,type:"deployments",className:"bg-orange-400 text-white",style:{borderRadius:"12px"},data:{name:"Deployment Clusters",type:"",details:(null===(a=e.clusters_deployments)||void 0===a?void 0:a.join(", "))||"None",images:["/images/cluster.png"]}},...(null===(r=e.distributed_switches)||void 0===r?void 0:r.map(e=>({expanded:!0,type:"switch",className:"bg-yellow-500 text-white",style:{borderRadius:"12px"},data:{name:e.name,type:"Distributed Switch",details:"NE Count: ".concat(e.ne_count," | HA Count: ").concat(e.ne_ha_count),images:["/images/vds.png"]},children:Array.from({length:e.ne_count}).map((t,n)=>{var a;return{expanded:!0,type:"ne",className:"bg-blue-500 text-white",style:{borderRadius:"12px"},data:{name:"NE ".concat(n+1),type:"Network Extension",details:e.ne_ha_count>n?"HA Enabled":"Standalone",images:["/images/ne.png"]},children:s&&(null===(a=e.extended_network)||void 0===a?void 0:a.filter(e=>e&&e.ne_id==="ne".concat(n+1)).map(e=>({expanded:!0,type:"network",className:"bg-green-500 text-white",style:{borderRadius:"12px"},data:{name:e.name,type:"Network",details:"".concat(e.network,"/").concat(e.prefix," | VLAN: ").concat(e.vlan_id||"N/A"),images:["/images/network.png"]}})))||[]}})})))||[]]}}))||[]}})}];n(r)})()},[e,s]);let k=async()=>{f(!0);try{let t=document.querySelector(".p-organizationchart");if(!t)throw Error("Chart element not found");let n=await u()(t,{scale:2,backgroundColor:"#ffffff",logging:!1,useCORS:!0,allowTaint:!0}),a=document.createElement("a");a.download="".concat((null==e?void 0:e.name)||"hcx-project",".png"),a.href=n.toDataURL("image/png"),a.click()}catch(e){console.error("Failed to export image:",e)}finally{f(!1)}};return(0,a.jsx)("div",{className:"flex flex-column gap-3",children:(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex align-items-center gap-2 mb-3",children:[(0,a.jsx)(l.X,{inputId:"show-networks",checked:s,onChange:e=>m(e.checked)}),(0,a.jsx)("label",{htmlFor:"show-networks",className:"ml-2",children:"Show Networks"}),(0,a.jsxs)("div",{className:"ml-auto flex gap-2",children:[(0,a.jsx)(d.z,{icon:"pi pi-minus",onClick:()=>_(e=>Math.max(.5,e-.1)),className:"p-button-rounded p-button-secondary"}),(0,a.jsx)(d.z,{icon:"pi pi-plus",onClick:()=>_(e=>Math.min(2,e+.1)),className:"p-button-rounded p-button-secondary"}),(0,a.jsx)(d.z,{label:"Export PNG",icon:"pi pi-image",onClick:k,loading:v})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:t.length>0&&(0,a.jsxs)("div",{style:{transform:"translate(".concat(y.x,"px, ").concat(y.y,"px) scale(").concat(b,")"),transformOrigin:"top center",transition:N?"none":"transform 0.2s",cursor:N?"grabbing":"grab"},onMouseDown:e=>{j(!0),S({x:e.clientX-y.x,y:e.clientY-y.y})},onMouseMove:e=>{N&&w({x:e.clientX-E.x,y:e.clientY-E.y})},onMouseUp:()=>j(!1),onMouseLeave:()=>j(!1),className:"jsx-b1f320c2ec397ede custom-org-chart",children:[(0,a.jsx)(r(),{id:"b1f320c2ec397ede",children:".custom-org-chart.jsx-b1f320c2ec397ede .p-organizationchart-line-down,.custom-org-chart.jsx-b1f320c2ec397ede .p-organizationchart-line-left,.custom-org-chart.jsx-b1f320c2ec397ede .p-organizationchart-line-right,.custom-org-chart.jsx-b1f320c2ec397ede .p-organizationchart-line-top{border-width:2px!important}"}),(0,a.jsx)(o.O,{value:t,nodeTemplate:e=>(0,a.jsx)("div",{className:"flex flex-column cursor-pointer",onClick:()=>h(e),onKeyPress:t=>"Enter"===t.key&&h(e),role:"button",tabIndex:0,"aria-label":"".concat(e.data.type,": ").concat(e.data.name),children:(0,a.jsxs)("div",{className:"flex flex-column align-items-center",children:[e.data.images&&(0,a.jsx)("div",{className:"flex gap-2 mb-2",children:e.data.images.map((e,t)=>(0,a.jsx)("img",{src:e,alt:"",className:"w-2rem h-2rem"},t))}),(0,a.jsx)("span",{className:"font-bold mb-2",children:e.data.name}),(0,a.jsx)("span",{className:"text-sm mb-1",children:e.data.type}),e.data.details&&(0,a.jsx)("span",{className:"text-sm",children:e.data.details})]})})})]})})]})})}},2801:function(e,t,n){"use strict";n.r(t),n.d(t,{ProjectContext:function(){return c},ProjectProvider:function(){return o}});var a=n(9268),s=n(6006),r=n(6539);let c=(0,s.createContext)({hcxProject:{name:""},setHcxProject:()=>{}});function o(e){let{children:t}=e,[n,o]=(0,s.useState)(!1),[i,l]=(0,s.useState)({name:"",vcenters:[{...r.T.VCENTER,serviceMeshes:[{...r.T.SERVICE_MESH}]}]});return(0,s.useEffect)(()=>{o(!0);let e=localStorage.getItem("hcxProject");e&&l(JSON.parse(e))},[]),(0,s.useEffect)(()=>{n&&localStorage.setItem("hcxProject",JSON.stringify(i))},[i,n]),(0,a.jsx)(c.Provider,{value:{hcxProject:i,setHcxProject:l},children:t})}},6539:function(e,t,n){"use strict";n.d(t,{E:function(){return s},T:function(){return a}});let a={VCENTER:{vcenter_name:"",vcenter_sso_url:"",vcenter_version:"",vcenter_url:"",vcenter_clusters:[],hcx_manager_name:"",hcx_cluster:"",hcx_datastore:"",hcx_resource_pool:"",hcx_ip:"",hcx_network:"",hcx_network_prefix:"",hcx_gateway:"",hcx_dns_servers:[],hcx_ntp_servers:[],serviceMeshes:[]},SERVICE_MESH:{name:"",vcenter_name:"",clusters_services:[],clusters_deployments:[],storage:[],pool:[],management:{network:"",ip:[],prefix:"",gateway:"",dns_servers:[]},vmotion_type:"management",replication_type:"management",uplink_type:"management",vMotion:null,replication:null,uplink:null,distributed_switches:[],wo_enabled:!1}},s={IP_ADDRESS:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,URL:/^https?:\/\/.+/,VERSION:/^\d+\.\d+(\.\d+)?$/,NETWORK_PREFIX:/^([1-9]|[1-2][0-9]|3[0-2])$/}}},function(e){e.O(0,[492,434,347,702,100,253,769,744],function(){return e(e.s=4200)}),_N_E=e.O()}]);